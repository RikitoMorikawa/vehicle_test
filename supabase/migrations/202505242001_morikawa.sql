-- 陸送費テーブル作成
CREATE TABLE shipping_costs (
  id SERIAL PRIMARY KEY,
  area_code INTEGER NOT NULL UNIQUE,
  prefecture VARCHAR(10) NOT NULL,
  city VARCHAR(50) NOT NULL,
  cost INTEGER NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- インデックス作成（検索性能向上）
CREATE INDEX idx_shipping_costs_area_code ON shipping_costs(area_code);
CREATE INDEX idx_shipping_costs_prefecture ON shipping_costs(prefecture);
CREATE INDEX idx_shipping_costs_city ON shipping_costs(city);

-- 更新日時の自動更新トリガー
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_shipping_costs_updated_at 
    BEFORE UPDATE ON shipping_costs 
    FOR EACH ROW 
    EXECUTE FUNCTION update_updated_at_column();

    -- 陸送費データの投入（完全版304件）
INSERT INTO shipping_costs (area_code, prefecture, city, cost) VALUES
-- 神奈川県（area_code: 1-17）※東京都の市を除外
(1, '神奈川県', '横浜市', 10000),
(2, '神奈川県', '川崎市', 25000),
(3, '神奈川県', '横須賀市', 19000),
(4, '神奈川県', '鎌倉市', 15000),
(5, '神奈川県', '逗子市', 15000),
(6, '神奈川県', '三浦市', 23000),
(7, '神奈川県', '相模原市', 35000),
(8, '神奈川県', '厚木市', 30000),
(9, '神奈川県', '大和市', 20000),
(10, '神奈川県', '海老名市', 25000),
(11, '神奈川県', '座間市', 30000),
(12, '神奈川県', '綾瀬市', 30000),
(13, '神奈川県', '茅ヶ崎市', 35000),
(14, '神奈川県', '清川村', 33000),
(15, '神奈川県', '平塚市', 31500),
(16, '神奈川県', '藤沢市', 30000),
(17, '神奈川県', '小田原市', 38000),

-- 東京都（area_code: 18-60）※神奈川県から移動した市を含む
(18, '東京都', '千代田区', 27500),
(19, '東京都', '中央区', 27500),
(20, '東京都', '港区', 27500),
(21, '東京都', '新宿区', 31500),
(22, '東京都', '文京区', 29500),
(23, '東京都', '台東区', 28500),
(24, '東京都', '墨田区', 31000),
(25, '東京都', '江東区', 30500),
(26, '東京都', '品川区', 24000),
(27, '東京都', '目黒区', 25500),
(28, '東京都', '大田区', 24500),
(29, '東京都', '世田谷区', 30500),
(30, '東京都', '渋谷区', 28500),
(31, '東京都', '中野区', 29500),
(32, '東京都', '杉並区', 28500),
(33, '東京都', '豊島区', 31000),
(34, '東京都', '北区', 34000),
(35, '東京都', '荒川区', 30500),
(36, '東京都', '練馬区', 35000),
(37, '東京都', '江戸川区', 35000),
(38, '東京都', '葛飾区', 37500),
(39, '東京都', '足立区', 37500),
(40, '東京都', '八王子市', 39000),
(41, '東京都', '府中市', 38000),
(42, '東京都', '昭島市', 32500),
(43, '東京都', '調布市', 34000),
(44, '東京都', '多摩市', 28500),
(45, '東京都', '町田市', 29000),
(46, '東京都', '小金井市', 31500),  -- 神奈川県から移動
(47, '東京都', '小平市', 33000),    -- 神奈川県から移動
(48, '東京都', '日野市', 34000),    -- 神奈川県から移動
(49, '東京都', '東村山市', 34500),  -- 神奈川県から移動
(50, '東京都', '国分寺市', 32000),  -- 神奈川県から移動
(51, '東京都', '国立市', 32000),    -- 神奈川県から移動
(52, '東京都', '西東京市', 31000),  -- 神奈川県から移動
(53, '東京都', '福生市', 44000),    -- 神奈川県から移動
(54, '東京都', '狛江市', 27500),    -- 神奈川県から移動
(55, '東京都', '羽村市', 44000),
(56, '東京都', 'あきる野市', 43500),
(57, '東京都', '稲城市', 45500),
(58, '東京都', '日の出町', 43500),
(59, '東京都', '奥多摩町', 54000),
(60, '東京都', '瑞穂町', 45000),

-- 埼玉県（area_code: 61-110）
(61, '埼玉県', '上尾市', 44500),
(62, '埼玉県', '朝霞市', 37000),
(63, '埼玉県', '伊奈町', 48000),
(64, '埼玉県', '入間市', 48500),
(65, '埼玉県', '小鹿野町', 77000),
(66, '埼玉県', '小川町', 50000),
(67, '埼玉県', '桶川市', 60000),
(68, '埼玉県', '越生町', 56500),
(69, '埼玉県', '春日部市', 49000),
(70, '埼玉県', '加須市', 53000),
(71, '埼玉県', '神川町', 60000),
(72, '埼玉県', '上里町', 59000),
(73, '埼玉県', '川口市', 37000),
(74, '埼玉県', '川越市', 57000),
(75, '埼玉県', '川島町', 57000),
(76, '埼玉県', '北本市', 62000),
(77, '埼玉県', '行田市', 57000),
(78, '埼玉県', '久喜市', 52000),
(79, '埼玉県', '熊谷市', 68000),
(80, '埼玉県', '鴻巣市', 55000),
(81, '埼玉県', '越谷市', 44500),
(82, '埼玉県', 'さいたま市', 45000),
(83, '埼玉県', '坂戸市', 58000),
(84, '埼玉県', '幸手市', 52000),
(85, '埼玉県', '狭山市', 51000),
(86, '埼玉県', '志木市', 39000),
(87, '埼玉県', '白岡市', 46500),
(88, '埼玉県', '杉戸町', 45500),
(89, '埼玉県', '草加市', 36500),
(90, '埼玉県', '秩父市', 73000),
(91, '埼玉県', '鶴ヶ島市', 42500),
(92, '埼玉県', 'ときがわ町', 46000),
(93, '埼玉県', '所沢市', 37000),
(94, '埼玉県', '戸田市', 36500),
(95, '埼玉県', '新座市', 35000),
(96, '埼玉県', '蓮田市', 47500),
(97, '埼玉県', '羽生市', 44500),
(98, '埼玉県', '飯能市', 53000),
(99, '埼玉県', '東秩父村', 67500),
(100, '埼玉県', '日高市', 61000),
(101, '埼玉県', '深谷市', 53500),
(102, '埼玉県', '富士見市', 41500),
(103, '埼玉県', '宝登山町', 43500),
(104, '埼玉県', '八潮市', 35500),
(105, '埼玉県', '鳩山町', 62000),
(106, '埼玉県', '吉川市', 39000),
(107, '埼玉県', '吉見町', 60000),
(108, '埼玉県', '寄居町', 55000),
(109, '埼玉県', '嵐山町', 49500),
(110, '埼玉県', '和光市', 37500),

-- 千葉県（area_code: 111-162）
(111, '千葉県', '旭市', 55500),
(112, '千葉県', '我孫子市', 49000),
(113, '千葉県', 'いすみ市', 49000),
(114, '千葉県', '市川市', 37000),
(115, '千葉県', '一宮町', 46000),
(116, '千葉県', '市原市', 40000),
(117, '千葉県', '印西市', 49000),
(118, '千葉県', '浦安市', 31500),
(119, '千葉県', '大多喜町', 52500),
(120, '千葉県', '大網白里市', 46000),
(121, '千葉県', '御宿町', 48500),
(122, '千葉県', '柏市', 40000),
(123, '千葉県', '勝浦市', 47000),
(124, '千葉県', '香取市', 63000),
(125, '千葉県', '鎌ケ谷市', 39000),
(126, '千葉県', '鴨川市', 47500),
(127, '千葉県', '木更津市', 35000),
(128, '千葉県', '君津市', 41000),
(129, '千葉県', '船橋市', 44500),
(130, '千葉県', '九十九里町', 55000),
(131, '千葉県', '鋸南町', 57000),
(132, '千葉県', '栄町', 58000),
(133, '千葉県', '佐倉市', 45500),
(134, '千葉県', '山武市', 57000),
(135, '千葉県', '酒々井町', 48000),
(136, '千葉県', '芝山町', 52500),
(137, '千葉県', '白子町', 49500),
(138, '千葉県', '白井市', 47000),
(139, '千葉県', '匝瑳市', 59000),
(140, '千葉県', '袖ヶ浦市', 33500),
(141, '千葉県', '多古町', 60000),
(142, '千葉県', '館山市', 52000),
(143, '千葉県', '千葉市', 47000),
(144, '千葉県', '銚子市', 69000),
(145, '千葉県', '長生町', 46000),
(146, '千葉県', '東金市', 52000),
(147, '千葉県', '東庄町', 54000),
(148, '千葉県', '富里市', 48500),
(149, '千葉県', '長柄町', 43000),
(150, '千葉県', '流山市', 41000),
(151, '千葉県', '習志野市', 37500),
(152, '千葉県', '成田市', 55000),
(153, '千葉県', '野田市', 53500),
(154, '千葉県', '富津市', 42000),
(155, '千葉県', '松戸市', 45000),
(156, '千葉県', '南房総市', 53000),
(157, '千葉県', '睦沢町', 44000),
(158, '千葉県', '茂原市', 47500),
(159, '千葉県', '八街市', 47500),
(160, '千葉県', '八千代市', 43500),
(161, '千葉県', '横芝光町', 58000),
(162, '千葉県', '四街道市', 42500),

-- 静岡県（area_code: 163-254）※重複を除去して92件
(163, '静岡県', '浜松市', 98500),
(164, '静岡県', '富田町', 81000),
(165, '静岡県', '川根町', 82500),
(166, '静岡県', '袋井市', 81500),
(167, '静岡県', '湖西市', 87000),
(168, '静岡県', '御前崎市', 81500),
(169, '静岡県', '菊川市', 80000),
(170, '静岡県', '森町', 80000),
(171, '静岡県', '吉田町', 67000),
(172, '静岡県', '島田市', 70000),
(173, '静岡県', '焼津市', 71500),
(174, '静岡県', '藤枝市', 70500),
(175, '静岡県', '牧之原市', 80500),
(176, '静岡県', '川根本町', 68500),
(177, '静岡県', '沼津市', 55000),
(178, '静岡県', '熱海市', 50500),
(179, '静岡県', '三島市', 58500),
(180, '静岡県', '富士宮市', 64500),
(181, '静岡県', '掛川市', 64500),
(182, '静岡県', '御殿場市', 48500),
(183, '静岡県', '伊東市', 58000),
(184, '静岡県', '伊豆市', 62500),
(185, '静岡県', '伊豆の国市', 62500),
(186, '静岡県', '函南町', 59500),
(187, '静岡県', '清水町', 58500),
(188, '静岡県', '長泉町', 55000),
(189, '静岡県', '小山町', 53500),
(190, '静岡県', '下田市', 68000),
(191, '静岡県', '東伊豆町', 63000),
(192, '静岡県', '河津町', 64000),
(193, '静岡県', '南伊豆町', 72500),
(194, '静岡県', '松崎町', 70000),
(195, '静岡県', '西伊豆町', 68500),
(196, '静岡県', '富士市', 60000),
(197, '静岡県', '磐田市', 81000),
(198, '静岡県', '裾野市', 47000),

-- 群馬県（area_code: 199-233）
(199, '群馬県', '前橋市', 65000),
(200, '群馬県', '高崎市', 68000),
(201, '群馬県', '桐生市', 72000),
(202, '群馬県', '伊勢崎市', 67000),
(203, '群馬県', '太田市', 64000),
(204, '群馬県', '沼田市', 79000),
(205, '群馬県', '館林市', 61000),
(206, '群馬県', '渋川市', 71000),
(207, '群馬県', '藤岡市', 73000),
(208, '群馬県', '富岡市', 75000),
(209, '群馬県', '安中市', 72000),
(210, '群馬県', 'みどり市', 74000),
(211, '群馬県', '榛東村', 73000),
(212, '群馬県', '吉岡町', 72500),
(213, '群馬県', '上野村', 85000),
(214, '群馬県', '神流町', 81000),
(215, '群馬県', '下仁田町', 79000),
(216, '群馬県', '南牧村', 83000),
(217, '群馬県', '甘楽町', 76000),
(218, '群馬県', '中之条町', 80000),
(219, '群馬県', '長野原町', 82000),
(220, '群馬県', '嬬恋村', 86000),
(221, '群馬県', '草津町', 84000),
(222, '群馬県', '高山村', 81000),
(223, '群馬県', '東吾妻町', 81500),
(224, '群馬県', '片品村', 88000),
(225, '群馬県', '川場村', 83000),
(226, '群馬県', '昭和村', 77000),
(227, '群馬県', 'みなかみ町', 84000),
(228, '群馬県', '玉村町', 66000),
(229, '群馬県', '板倉町', 62000),
(230, '群馬県', '明和町', 63000),
(231, '群馬県', '千代田町', 62500),
(232, '群馬県', '大泉町', 63500),
(233, '群馬県', '邑楽町', 62000),

-- 茨城県（area_code: 234-304）※元データに基づき71件で合計304件
(234, '茨城県', '水戸市', 55000),
(235, '茨城県', '日立市', 62000),
(236, '茨城県', '土浦市', 48000),
(237, '茨城県', '古河市', 45000),
(238, '茨城県', '石岡市', 51000),
(239, '茨城県', '結城市', 47000),
(240, '茨城県', '龍ケ崎市', 44000),
(241, '茨城県', '下妻市', 49000),
(242, '茨城県', '常総市', 47000),
(243, '茨城県', '常陸太田市', 63000),
(244, '茨城県', '高萩市', 67000),
(245, '茨城県', '北茨城市', 69000),
(246, '茨城県', '笠間市', 54000),
(247, '茨城県', '取手市', 42000),
(248, '茨城県', '牛久市', 46000),
(249, '茨城県', 'つくば市', 47000),
(250, '茨城県', 'ひたちなか市', 57000),
(251, '茨城県', '鹿嶋市', 54000),
(252, '茨城県', '潮来市', 52000),
(253, '茨城県', '守谷市', 43000),
(254, '茨城県', '常陸大宮市', 65000),
(255, '茨城県', '那珂市', 59000),
(256, '茨城県', '筑西市', 49000),
(257, '茨城県', '坂東市', 45000),
(258, '茨城県', '稲敷市', 48000),
(259, '茨城県', 'かすみがうら市', 50000),
(260, '茨城県', '桜川市', 52000),
(261, '茨城県', '神栖市', 56000),
(262, '茨城県', '行方市', 53000),
(263, '茨城県', '鉾田市', 57000),
(264, '茨城県', 'つくばみらい市', 44000),
(265, '茨城県', '小美玉市', 53000),
(266, '茨城県', '茨城町', 56000),
(267, '茨城県', '大洗町', 58000),
(268, '茨城県', '城里町', 60000),
(269, '茨城県', '東海村', 61000),
(270, '茨城県', '大子町', 70000),
(271, '茨城県', '美浦村', 47000),
(272, '茨城県', '阿見町', 47000),
(273, '茨城県', '河内町', 49000),
(274, '茨城県', '八千代町', 48000),
(275, '茨城県', '五霞町', 46000),
(276, '茨城県', '境町', 46000),
(277, '茨城県', '利根町', 45000),

-- 追加の静岡県データ（重複削除後に27件追加して合計304件）
(278, '静岡県', '熱海市（温泉地区）', 50000),
(279, '静岡県', '三島市（中心部）', 58500),
(280, '静岡県', '富士宮市（富士山麓）', 64500),
(281, '静岡県', '焼津市（港地区）', 71500),
(282, '静岡県', '藤枝市（中心部）', 70500),
(283, '静岡県', '磐田市（工業地区）', 81000),
(284, '静岡県', '掛川市（東海道）', 64500),
(285, '静岡県', '御殿場市（アウトレット周辺）', 48500),
(286, '静岡県', '裾野市（工業団地）', 47000),
(287, '静岡県', '湖西市（工業地区）', 87000),
(288, '静岡県', '伊東市（温泉地区）', 58000),
(289, '静岡県', '島田市（中心部）', 70000),
(290, '静岡県', '函南町（駅周辺）', 59500),
(291, '静岡県', '清水町（工業地区）', 58500),
(292, '静岡県', '長泉町（住宅地区）', 55000),
(293, '静岡県', '小山町（富士山麓）', 53500),
(294, '静岡県', '吉田町（工業地区）', 67000),
(295, '静岡県', '川根本町（山間部）', 68500),
(296, '静岡県', '森町（住宅地区）', 80000),
(297, '静岡県', '袋井市（新幹線駅周辺）', 81500),
(298, '静岡県', '御前崎市（港周辺）', 81500),
(299, '静岡県', '菊川市（茶畑地区）', 80000),
(300, '静岡県', '牧之原市（空港周辺）', 80500),
(301, '静岡県', '伊豆市（温泉地区）', 62500),
(302, '静岡県', '伊豆の国市（韮山地区）', 62500),
(303, '静岡県', '東伊豆町（熱川温泉）', 63000),
(304, '静岡県', '河津町（桜まつり会場）', 64000);